<div ng-show="offer1current" class="swell" id="offerPage1">
  <div class="row-fluid">
    <form data-toggle="validator" role="form">
      <h1 class="text-center">Step 1 of 3</h1>
      <div class="year form-group">
        <h3>What year is your car?</h3>
        <select ng-change="updateTrims()" class="form-control" name="year" ng-model="offer.year" required>
          <option value="" selected="selected">Select a year</option>
          <option value="{{year}}" ng-repeat="year in years">{{year}}</option>
        </select>
      </div>
      <div class="trim form-group">
        <h3>What trim is your car?</h3>
        <select ng-change="updateColors()" class="form-control" name="trim" ng-model="offer.trim" required>
          <option value="" selected="selected">Select a trim</option>
          <option value="{{trim}}" ng-repeat="trim in trims">{{trim}}</option>
        </select>
      </div>
      <div class="color form-group">
        <h3>What paint color?</h3>
        <select ng-change="pickColor()" class="form-control" name="color" ng-model="offer.color" required ng-style="{'background-color': colors[offer.color].hex}">
          <option value="" selected="selected">Select a color</option>
          <option value="{{$index}}" ng-repeat="color in colors track by $index">{{color.name}}</option>
        </select>
      </div>
      <div class="pushToStart form-group" ng-show="offer.possiblePTS">
        <h3>Do you have push to start?</h3>
        <select class="form-control" name="pushToStart" ng-model="offer.pushToStart" required>
          <option value="" selected="selected">Select yes or no</option>
          <option value="true">Yes</option>
          <option value="false">No</option>
        </select>
      </div>
    </form>
    <div class="upload form-group">
      <form  ng-controller="UploadCtrl as up" name="up.upload_form">
              <h3>Do you have a photo?</h3>
          <input 
              type="file" 
              ngf-select 
              ng-model="up.file" 
              name="file" 
              ngf-pattern="'image/*'"
              accept="image/*" 
              ngf-max-size="20MB" 
              />
          <img style="width:100px;" ng-show="!!up.file" ngf-thumbnail="up.file || 'images/no-thumbnail.png'"/>
          <i ng-show="up.upload_form.file.$error.required">*required</i>
          <br>
          <i ng-show="up.upload_form.file.$error.maxSize">File too large 
          {{up.file.size / 1000000|number:1}}MB: max 20M</i>
         <!--  Multiple files
          <div class="button" ngf-select ng-model="up.files" ngf-multiple="true">Select</div>
          Drop files: <div ngf-drop ng-model="up.files" class="drop-box">Drop</div> -->
          <button class="btn btn-default btn-lg" type="submit" ng-click="up.submit()">submit</button>
          <p>{{up.progress}}</p>
      </form>
        <button class="btn btn-default btn-lg" ng-click="nextOfferPage()">Next</button>
    </div>
  </div>
</div>

<div class="zone">
  <div id="dropZ">
    <div class="selectFile">       
      <label for="file">Select file</label>                   
      <input type="file" name="files[]" id="file">
    </div>
    <div class="pull-right">
      <i class="fa fa-cloud-upload"></i>
      Drag and drop your file here
      <p>File size limit : 10 MB</p>
    </div>
  </div>
</div>
<script>
  $(document).bind('dragover', function (e) {
      var dropZone = $('.zone'),
          timeout = window.dropZoneTimeout;
      if (!timeout) {
          dropZone.addClass('in');
      } else {
          clearTimeout(timeout);
      }
      var found = false,
          node = e.target;
      do {
          if (node === dropZone[0]) {
              found = true;
              break;
          }
          node = node.parentNode;
      } while (node != null);
      if (found) {
          dropZone.addClass('hover');
      } else {
          dropZone.removeClass('hover');
      }
      window.dropZoneTimeout = setTimeout(function () {
          window.dropZoneTimeout = null;
          dropZone.removeClass('in hover');
      }, 100);
  });
</script>